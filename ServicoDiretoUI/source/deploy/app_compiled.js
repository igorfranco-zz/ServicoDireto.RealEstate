angular.module("ElementApp",[]),angular.module("CultureApp",[]),angular.module("CommonApp",[]),angular.module("LocationApp",[]),angular.module("StructureApp",[]),angular.module("CustomerApp",[]),angular.module("AccountApp",[]),angular.module("ComponentApp",[]);var mainApp=angular.module("MainApp",["ui.router","ngFileUpload","LocalStorageModule","zonerMapModule","jcs-autoValidate","angular-loading-bar","ui.bootstrap","ngAnimate","toastr","rzModule","ngRoute","ngResource","ngLocale","zonerPaginationModule","ElementApp","CultureApp","CommonApp","ComponentApp","AccountApp","LocationApp","StructureApp","CustomerApp"]).constant("config",{skype:"igorfrancobrum",companyName:"Serviço Direto",appName:"Serviço Direto | Imóveis | Apartamentos, Casas e Imóveis à Venda e para Alugar",appVersion:1,apiUrl:"http://192.1.1.194/servicodireto/api",phone:"+55 (51) -",address1:"-",address2:"Porto Alegre, RS Brasil",email:"contato@servicodireto.com.br",adminSite:"http://api.servicodireto.com/api/",layoutSite:"http://localhost:8989",carouselInterval:5e3}).run(["bootstrap3ElementModifier","defaultErrorMessageResolver","$rootScope","toastr","AccountService","$state",function(e,a,o,r,t,n){o.bodyClass="page-sub-page page-submission-success",t.fillAuthData(),a.setI18nFileRootPath("components/angular-auto-validate/dist/lang"),a.setCulture("pt-BR"),a.getErrorMessages().then(function(e){e.matchPassword="As senhas não conferem.",e.maxHeight="O tamanho da imagem excedeu o permitido",e.maxHeight="Valor informado inválido!"}),o.options={minArea:0,maxArea:1e4,minPrice:0,maxPrice:2e6,priceStep:200,minRadius:0,maxRadius:20,showRadius:!0,minRooms:1,maxRooms:10,minGarage:1,maxGarage:4},o.$watch("error",function(e){if(console.log(o.error),o.error&&o.error.data){var a=[];console.log(o.error),o.error.data.modelState&&(a.push("<ul>"),angular.forEach(o.error.data.modelState,function(e,o){a.push("<li>"+o+": "+e+"</li>")}),a.push("</ul>")),o.error.data.exceptionMessage&&a.push(o.error.data.exceptionMessage),r.error(o.error.data.message+a.join(" "),o.error.statusText,{allowHtml:!0,closeButton:!0})}}),o.$on("$stateChangeStart",function(e,a,r,t,i){o.bodyClass="page-sub-page page-submission-success",null!=o.authData&&0!=o.authData.isAuthenticated||"submit"==a.name&&(n.go("sign-in",{redirectTo:"submit"}),e.preventDefault())}),angular.forEach(["$stateChangeSuccess","$stateChangeError"],function(e){o.$on(e,function(e,a,o,r,t,n){initializeOwl(!1)})})}]).factory("authInterceptorService",["$q","$injector","localStorageService",function(e,a,o){var r={},t=function(e){e.headers=e.headers||{};var a=o.get("authorizationData");return a&&(e.headers.Authorization="Bearer "+a.bearerToken),e},n=function(r){if(401===r.status){var t=a.get("AccountService"),n=(o.get("authorizationData"),a.get("$state"));t.logOut(),n.go("sign-in",{},{reload:!0})}return e.reject(r)};return r.request=t,r.responseError=n,r}]);
angular.module("MainApp").config(["$httpProvider",function(n){n.interceptors.push("authInterceptorService")}]).config(["toastrConfig",function(n){angular.extend(n,{autoDismiss:!1,containerId:"toast-container",maxOpened:0,newestOnTop:!0,positionClass:"toast-top-right",preventDuplicates:!1,preventOpenDuplicates:!1,target:"body"})}]).config(["cfpLoadingBarProvider",function(n){n.includeSpinner=!1}]);
angular.module("MainApp").config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("/",{url:"/",templateUrl:"modules/element/views/initial.html",controller:"ElementController"}).state("profile",{url:"/profile",templateUrl:"modules/customer/views/profile.html",controller:"ProfileCustomerController"}).state("agent-detail",{url:"/agent-detail/:idCustomer",templateUrl:"modules/customer/views/agent-detail.html",controller:"AgentDetailCustomerController"}).state("sign-in",{controller:"LoginAccountController",templateUrl:"modules/account/views/sign-in.html",params:{redirectTo:""}}).state("log-out",{url:"/log-out",controller:"LogoutAccountController"}).state("/activate-account",{url:"/activate-account/:code",controller:"ActivateAccountController"}).state("recovery",{controller:"RecoveryAccountController",templateUrl:"modules/account/views/recovery.html",params:{recoveryType:0}}).state("change-password",{url:"/change-password/:code",controller:"ChangePasswordAccountController",templateUrl:"modules/account/views/change-password.html",params:{code:""}}).state("status",{templateUrl:"modules/common/views/status.html",controller:"StatusCommonController",params:{message:{statusType:0,header:"",description:""}}}).state("create-account",{templateUrl:"modules/account/views/create-account.html",controller:"CreateAccountController"}).state("terms-conditions",{url:"/terms-conditions",templateUrl:"modules/common/views/terms-conditions.html",controller:"TermsConditionsController"}).state("about-us",{url:"/about-us",templateUrl:"modules/common/views/about-us.html",controller:"AboutUsController"}).state("contact",{templateUrl:"modules/common/views/contact.html",controller:"ContactController"}).state("property-detail",{url:"/property-detail?idElement",templateUrl:"modules/element/views/property-detail.html",controller:"ElementDetailController"}).state("submit",{url:"/submit/:idElement",templateUrl:"modules/element/views/submit.html",controller:"ElementSubmitController"}).state("properties-listing-lines",{templateUrl:"modules/element/views/properties-listing-lines.html",controller:"ElementFilterController"}).state("properties-map",{templateUrl:"modules/element/views/properties-map.html",controller:"ElementFilterController"}).state("bookmarked",{url:"/bookmarked",templateUrl:"modules/customer/views/bookmarked.html",controller:"BookmarkedCustomerController"}).state("my-properties",{url:"/my-properties",templateUrl:"modules/customer/views/my-properties.html",controller:"MyPropertiesCustomerController"})}]);
angular.module("MainApp").controller("MainController",["$scope","config",function(n,o){n.config=o}]);
angular.module("MainApp").directive("bootselectpicker",["$timeout",function(e){return{link:function(e,t,i){e.$watchCollection("array",function(e){t.selectpicker("refresh")})},restrict:"A",replace:!0,scope:{array:"=","class":"="}}}]).directive("zCheckbox",["$timeout",function(e){return{link:function(e,t,i){t.iCheck(),console.log("zCheckbox called"),e.$watchCollection("array",function(e){t.iCheck("refresh"),console.log("zCheckbox called update")})},restrict:"A",replace:!0}}]).directive("icheck",["$timeout","$parse",function(e,t){return{require:"ngModel",link:function(t,i,n,l){return e(function(){var e;return e=n.value,t.$watch(n.ngModel,function(e){$(i).iCheck("update")}),$(i).iCheck({}).on("ifChanged",function(o){if("checkbox"===$(i).attr("type")&&n.ngModel&&t.$apply(function(){return l.$setViewValue(o.target.checked)}),"radio"===$(i).attr("type")&&n.ngModel)return t.$apply(function(){return l.$setViewValue(e)})})})}}}]).directive("zFileInput",["$timeout","config",function(e,t){return{link:function(e,i,n,l){e.$watch("element",function(n){console.log("zFileInput called");var l=[],o='<button type="button" class="btn btn-default" title="Imagem principal" onclick="alert(\'Call your custom code here.\')"><i class="glyphicon glyphicon-tag"></i></button>';if(null!=e.element&&null!=e.element.Images)for(var r=0;r<e.element.Images.length;r++){var a=e.element.Images[r];l.push("<img alt='' title='' class='file-preview-image' src='"+t.adminSite+"/uploads/"+e.element.IDCustomer+"/"+e.element.IDElement+"/thumb/"+a+"' >")}i.fileinput({initialPreview:l,language:"pt-BR",overwriteInitial:!0,uploadUrl:"/____LINK_UPLOAD/2",allowedFileExtensions:["jpg","png","gif"],browseClass:"btn btn-default",browseIcon:'<i class="glyphicon glyphicon-picture"></i> ',removeClass:"btn btn-danger",removeIcon:'<i class="glyphicon glyphicon-trash"></i> ',removeIcon:'<i class="glyphicon glyphicon-remove"></i>',showUpload:!1,maxImageWidth:200,maxFileCount:5,resizeImage:!0,maxFileSize:500,layoutTemplates:{actions:o+" {delete}"}})})},restrict:"A",require:"ngModel",replace:!0,scope:{element:"=ngModel"}}}]).directive("zFileInputAvatar",["$timeout","config",function(e,t){return{link:function(e,i,n){e.$watch("logo",function(e){console.log("zFileInputAvatar called");var n=[];null!=e&&void 0!=e?(n.push('<img src="'+t.adminSite+e+'" alt="Foto">'),i.fileinput("refresh",{initialPreview:n})):i.fileinput({maxFileCount:1,overwriteInitial:!0,maxFileSize:1500,showClose:!1,showCaption:!1,showUpload:!1,language:"pt-BR",browseLabel:"",removeLabel:"",browseIcon:'<i class="glyphicon glyphicon-folder-open"></i>',removeIcon:'<i class="glyphicon glyphicon-remove"></i>',removeTitle:"Cancel or reset changes",elErrorContainer:"#kv-avatar-errors",msgErrorClass:"alert alert-block alert-danger",defaultPreviewContent:'<img src="assets/img/agent-01.jpg" alt="Foto" >',allowedFileExtensions:["jpg","png","gif"]})})},restrict:"A",replace:!0,scope:{logo:"=ngModel"}}}]).directive("zTooltip",["$timeout",function(e){return{link:function(e,t,i){console.log("zTooltip called"),t.tooltip()},restrict:"A",replace:!0}}]).directive("meioMask",["$timeout",function(e){return{link:function(e,t,i){console.log("meioMask called"),t.setMask(i.mask)},restrict:"A",replace:!0}}]);
angular.module("ComponentApp").directive("zonerFilter",["$filter",function(o){return{link:function(i,e,t){i.radiusSlider={options:{hideLimitLabels:!0,floor:i.options.minRadius,ceil:i.options.maxRadius,translate:function(o){return"Raio: "+o+" Km"}}},i.priceSlider={options:{hideLimitLabels:!0,floor:i.options.minPrice,ceil:i.options.maxPrice,step:i.options.priceStep,translate:function(e){return e==i.options.maxPrice?o("currency")(e)+" ou mais":o("currency")(e)}}},i.roomSlider={options:{hideLimitLabels:!0,floor:i.options.minRooms,ceil:i.options.maxRooms,translate:function(o){return o==i.options.maxRooms?o+" ou mais":o+" Quartos(s)"}}},i.garageSlider={options:{hideLimitLabels:!0,floor:i.options.minGarage,ceil:i.options.maxGarage,translate:function(o){return o==i.options.maxGarage?o+" ou mais":o+" Garagem(ns)"}}},i.areaSlider={options:{hideLimitLabels:!0,floor:i.options.minArea,ceil:i.options.maxArea,translate:function(e){return e==i.options.maxArea?o("number")(e)+" m² ou mais":"Área "+o("currency")(e)+" m²"}}},i.filter.radius=i.options.minRadius,i.filter.minRooms=i.options.minRooms,i.filter.maxRooms=i.options.maxRooms,i.filter.minPrice=i.options.minPrice,i.filter.maxPrice=i.options.maxPrice,i.filter.minGarage=i.options.minGarage,i.filter.maxGarage=i.options.maxGarage,i.filter.minArea=i.options.minArea,i.filter.maxArea=i.options.maxArea,i.filter.defaultvalues=i.options},controller:["$scope","$rootScope",function(o,i){o.$watch("filter",function(o,e){o.pageIndex==e.pageIndex&&o.orderBy==e.orderBy||i.$broadcast("filterRequested")},!0),o.doFilter=function(){console.log("filterRequested"),i.$broadcast("filterRequested")}}],templateUrl:"./modules/_components/zonerFilter/partials/template.html",restrict:"E",replace:!0,scope:{options:"=",filter:"="}}}]);
angular.module("AccountApp").controller("CreateAccountController",["$scope","$rootScope","toastr","$state","AccountService",function(e,o,t,c,r){e.account={allowNewsletter:!0,email:"",password:"",confirmPassword:"",userName:"",idCulture:moment.locale()},e.createAccount=function(){r.CreateAccount.save(e.account).$promise.then(function(o){t.success(o.message,"Confirmação!"),c.go("status",{message:{statusType:1,header:"Código de confirmação enviado!",description:'Para que seu cadastro seja confirmado acesse o seu e-mail "'+e.account.email+'".'}})},function(e){o.error=e})}}]).controller("ActivateAccountController",["$scope","$rootScope","toastr","$state","AccountService","$stateParams",function(e,o,t,c,r,a){r.ActivateAccount.execute({code:a.code}).$promise.then(function(e){t.success(e.message,"Confirmação!"),c.go("/")},function(e){o.error=e,c.go("create-account")})}]).controller("LoginAccountController",["$scope","localStorageService","$rootScope","toastr","$state","$stateParams","AccountService",function(e,o,t,c,r,a,s){e.account={password:"",userName:"",grant_type:"password"},e.doLogin=function(){s.Login(e.account).then(function(e){""!=a.redirectTo?r.go(a.redirectTo):r.go("profile")},function(e,o){t.error={statusText:e.error,data:{message:e.error_description}}})}}]).controller("ChangePasswordAccountController",["$scope","$rootScope","toastr","$stateParams","$state","AccountService",function(e,o,t,c,r,a){e.password={oldPassword:"",newPassword:"",confirmPassword:"",activateCode:c.code},e.changePassword=function(){a.ChangePassword.execute(e.password).$promise.then(function(e){t.success(e.message,"Confirmação!"),a.logOut(),r.go("sign-in")},function(e){o.error=e})}}]).controller("LogoutAccountController",["$scope","$state","AccountService",function(e,o,t){console.log("LogoutAccountController called"),t.logOut(),o.go("sign-in")}]).controller("RecoveryAccountController",["$scope","$rootScope","toastr","$state","$stateParams","AccountService",function(e,o,t,c,r,a){e.data={userName:"",recoveryName:"",email:"",recovery:r.recoveryType,idCulture:moment.locale()};var s={statusType:1,header:"",description:""};1==r.recoveryType?(e.data.recoveryName="Senha",s.header="Recuperação de senha efetuda com sucesso",s.description="Um e-mail com as instruções de recuperação de senha foi enviado a sua caixa postal"):2==r.recoveryType&&(e.data.recoveryName="Usuário",s.header="Recuperação de usuário efetuda com sucesso",s.description="Um e-mail contendo o seu usuário foi enviado a sua caixa postal"),e.requestRecovery=function(){a.Recover.execute(e.data).$promise.then(function(e){c.go("status",{message:s})},function(e){o.error=e})}}]);
angular.module("AccountApp").directive("matchPassword",["$timeout",function(r){return{restrict:"A",require:"ngModel",link:function(s,t,o,a,e){return r(function(){var r=function(r){return a.$isEmpty(r)||s.password!=r?(a.$setValidity("matchPassword",!1),r):(a.$setValidity("matchPassword",!0),r)};a.$parsers.push(r),a.$formatters.push(r)})},scope:{password:"=matchPassword",confirmPassword:"=ngModel"}}}]);
angular.module("AccountApp").factory("AccountService",["$http","$q","$resource","$rootScope","config","localStorageService",function(e,a,t,o,r,c){"use strict";var n={isAuthenticated:!1,userName:"",bearerToken:"",expirationDate:null},u=function(){console.log("clearAuthData called"),n.isAuthenticated=!1,n.userName="",n.bearerToken="",n.expirationDate=null,delete o.authData},i=function(){u(),c.remove("authorizationData")};return{CreateAccount:t(r.apiUrl+"/apiAccount/CreateAccount",{},{save:{method:"POST",params:{}}}),Recover:t(r.apiUrl+"/apiAccount/Recover",{},{execute:{method:"POST",params:{}}}),ChangePassword:t(r.apiUrl+"/apiAccount/ChangePassword",{},{execute:{method:"POST",params:{}}}),Login:function(t){var u="grant_type=password&username="+t.userName+"&password="+t.password,s=a.defer();return e.post(r.apiUrl+"/token",u,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).error(function(e,a){i(),s.reject(e)}).success(function(e){console.log(e),n.isAuthenticated=!0,n.userName=t.userName,n.bearerToken=e.access_token,n.expirationDate=e.expires_in,c.set("authorizationData",n),o.authData=n,s.resolve(e)}),s.promise},clearAuthData:u,logOut:i,fillAuthData:function(){console.log("fillAuthData called");var e=c.get("authorizationData");e&&(n=e,o.authData=n,o.$apply(),console.log("fillAuthData loaded"))},ActivateAccount:t(r.apiUrl+"/apiAccount/ActivateAccount",{},{execute:{method:"GET",params:{}}})}}]);
angular.module("CommonApp").controller("CommonController",["$scope","$location","CommonService",function(e,t,r){e.error=null,e.templates=[{name:"footer",url:"modules/common/views/footer.html"},{name:"navbar",url:"modules/common/views/navbar.html"},{name:"searchbox",url:"modules/common/views/searchbox.html"}],e.getTemplateUrl=function(t){for(var r=0;r<e.templates.length;r++)if(e.templates[r].name==t)return e.templates[r].url}}]).controller("TermsConditionsController",["$state","$scope","$timeout",function(e,t,r){}]).controller("AboutUsController",["$state","$scope","$timeout",function(e,t,r){}]).controller("StatusCommonController",["$scope","$stateParams","CommonService",function(e,t,r){e.message=t.message}]).controller("SideBarController",["$state","$rootScope","$scope","$timeout","ElementService",function(e,t,r,l,o){r.customer=null,r.properties=[],r.recordCount=0,t.filter={ActiveView:1,groupIn:3,recordCount:0,totalRecodsPerPage:12,orderBy:"createDate DESC",pageIndex:0,idCulture:moment.locale()};var i=function(){t.filter.IDPurpose=[],t.filter.FilterAttribute=[],null!=t.filter.singleIDPurpose&&t.filter.IDPurpose.push(t.filter.singleIDPurpose),null==t.filter.defaultvalues||t.filter.defaultvalues.minPrice==t.filter.minPrice&&t.filter.defaultvalues.maxPrice==t.filter.maxPrice||t.filter.FilterAttribute.push({Acronym:"VALT",InitialValue:t.filter.minPrice,FinalValue:t.filter.maxPrice}),null==t.filter.defaultvalues||t.filter.defaultvalues.minRooms==t.filter.minRooms&&t.filter.defaultvalues.maxRooms==t.filter.maxRooms||t.filter.FilterAttribute.push({Acronym:"BEDS",InitialValue:t.filter.minRooms,FinalValue:t.filter.maxRooms}),null==t.filter.defaultvalues||t.filter.defaultvalues.minGarage==t.filter.minGarage&&t.filter.defaultvalues.maxGarage==t.filter.maxGarage||t.filter.FilterAttribute.push({Acronym:"GAR",InitialValue:t.filter.minGarage,FinalValue:t.filter.maxGarage}),null==t.filter.defaultvalues||t.filter.defaultvalues.minArea==t.filter.minArea&&t.filter.defaultvalues.maxArea==t.filter.maxArea||t.filter.FilterAttribute.push({Acronym:"TA",InitialValue:t.filter.minArea,FinalValue:t.filter.maxArea}),console.log(t.filter.FilterAttribute),o.ListElement.query(t.filter).$promise.then(function(o){l(function(){r.properties=o.records,r.recordCount=o.recordCount,t.filter.recordCount=o.recordCount,e.go("properties-listing-lines")},100)},function(e){t.error=e})};r.$on("filterRequested",function(e,t){i()}),o.ListFeatured.query({idCulture:moment.locale()}).$promise.then(function(e){r.elementFeatured=e},function(e){t.error=e})}]).controller("ContactController",["$scope","$rootScope","toastr","CustomerService",function(e,t,r,l){e.contact={name:"",message:"",email:"",idCulture:moment.locale()},e.sendEmail=function(){l.SendEmailContact.execute(e.contact).$promise.then(function(e){r.success("Email enviado com sucesso","Confirmação!")},function(e){t.error=e})}}]);
var _setImagePopup=function(){var e=$(".image-popup");e.length>0&&e.magnificPopup({type:"image",removalDelay:300,mainClass:"mfp-fade",overflowY:"scroll"})};angular.module("CommonApp").directive("propertyCarousel",["$timeout","config",function(e,t){return{link:function(e,o,i){e.config=t,e.$watchCollection("items",function(t){if(null!=e.items){console.log(e.items);o.owlCarousel({rtl:!1,items:1,responsiveBaseWidth:".property-slide",dots:!1,autoHeight:!0,margin:10,navigation:!0,navText:["",""]});_setImagePopup()}})},templateUrl:"./modules/common/partials/property-carousel.html",restrict:"E",replace:!0,scope:{items:"=",element:"="}}}]).directive("homepageSlider",["$timeout","config",function(e,t){return{link:function(e,t,o){t.owlCarousel({navigation:!0,slideSpeed:300,paginationSpeed:400,singleItem:!0})},templateUrl:"./modules/common/partials/homepage-slider.html",restrict:"E",replace:!0,scope:{items:"=",element:"="}}}]).directive("sideBar",["$timeout","config",function(e,t){return{link:function(e,t,o){},compile:function(e,t){t.showFilter||(t.showFilter="true"),t.showFeaturedProperties||(t.showFeaturedProperties="true"),t.showGuides||(t.showGuides="true")},controller:"SideBarController",templateUrl:"./modules/common/partials/sidebar.html",restrict:"E",scope:{showFilter:"=",showGuides:"=",showFeaturedProperties:"=",config:"="}}}]);
angular.module("CommonApp").factory("CommonService",["$q","$timeout","$location",function(e,n,o){var r=null;return{showMessage:function(t){var u=e.defer();return n(function(){r=t,o.path("status")},2e3),u.promise},getMessage:function(){var o=e.defer();return n(function(){o.resolve(r)},2e3),o.promise}}}]);
angular.module("CultureApp").controller("CultureController",["$scope","CultureService",function(e,u){e.cultures=[],e.culture=null,e.error=null,e.templates=[{name:"create",url:"/app/modules/culture/views/create.html"},{name:"list",url:"/app/modules/culture/views/list.html"}],e.getTemplateUrl=function(u){for(var t=0;t<e.templates.length;t++)if(e.templates[t].name==u)return e.templates[t].url},e.basedate=new Date(2010,11,28,14,57),e["delete"]=function(){$id=e.culture.IDCulture,u["delete"]({id:$id}).$promise.then(function(){e.cultures!=[]&&(e.cultures.pop(e.culture),e.culture=null)},function(u){e.error=u})},e.save=function(){e.culture.$save().then(function(){e.cultures.push(e.culture)},function(u){e.error=u})},e.update=function(){$id=e.culture.IDCulture,u.update({id:$id},e.culture).$promise.then(function(){e.listCulture()},function(u){e.error=u})},e.listCulture=function(){u.query().$promise.then(function(u){e.cultures=u},function(u){e.error=u})},e.getCulture=function(t){u.get({},{Id:t}).$promise.then(function(u){e.culture=u},function(u){e.error=u})}}]);
angular.module("CultureApp").factory("CultureService",["$resource",function(e){return e(CONFIG.SERVICE_URL+"/culture/:Id",{Id:"@Id"},{save:{method:"POST"},update:{method:"PUT"},reviews:{method:"GET",params:{reviews_only:"true"},isArray:!0}})}]);
angular.module("CustomerApp").controller("ProfileCustomerController",["$scope","$rootScope","CustomerService","toastr","config","Upload","$timeout",function(e,t,r,o,n,i,l){e.customer=null,r.GetCustomer.query().$promise.then(function(t){e.customer=t,e.$broadcast("elementLoaded",{idCountry:t.idCountry,idStateProvince:t.idStateProvince,idCity:t.idCity})},function(e){t.error=e}),e.saveCustomer=function(){r.SaveCustomer.execute(e.customer).$promise.then(function(e){o.success("Perfil salvo com sucesso!","Confirmação!")},function(e){t.error=e})},e.uploadFiles=function(r,u){e.files=r,e.errFiles=u,angular.forEach(r,function(e){e.upload=i.upload({url:n.apiUrl+"/apicustomer/UploadAvatar",data:{file:e}}),e.upload.then(function(e){l(function(){o.success(e.data.message,"Confirmação!")})},function(e){t.error=e},function(t){e.progress=Math.min(100,parseInt(100*t.loaded/t.total))})})}}]).controller("BookmarkedCustomerController",["$scope","$rootScope","ElementService",function(e,t,r){e.bookmarkedElements=[],r.ListBookmarked.query({idCulture:moment.locale()}).$promise.then(function(t){e.bookmarkedElements=t},function(e){t.error=e})}]).controller("MyPropertiesCustomerController",["$filter","$scope","$rootScope","toastr","$uibModal","ElementService","$stateParams",function(e,t,r,o,n,i,l){t.properties=[],t.recordCount=0,t.filter={recordCount:0,totalRecodsPerPage:10,orderBy:"name",pageIndex:0,idCulture:moment.locale()},t.$watch("filter",function(e,t){e.pageIndex==t.pageIndex&&e.orderBy==t.orderBy||u()},!0);var u=function(){t.filter.useInternalAuth=!0,i.ListElement.query(t.filter).$promise.then(function(e){t.properties=e.records,t.recordCount=e.recordCount,t.filter.recordCount=e.recordCount},function(e){r.error=e})};t.listProperties=u,t.disableElement=function(r){var i=n.open({templateUrl:"myModalContent.html",controller:"DeleteElementCustomerController",size:20,resolve:{idElement:function(){return r}}});i.result.then(function(r){o.success(r.message,"Confirmação!");var n=e("filter")(t.properties,{idElement:r.idElement})[0];n.status=0},function(){console.log("Modal dismissed at: "+new Date)})},u()}]).controller("DeleteElementCustomerController",["$scope","$rootScope","ElementService","idElement","$uibModalInstance",function(e,t,r,o,n){e.idElement=o,e.ok=function(){r.InactivateElement.execute({idElement:e.idElement}).$promise.then(function(t){n.close({message:t.message,idElement:e.idElement})},function(e){t.error=e})},e.cancel=function(){n.dismiss("cancel")}}]).controller("SendMessageCustomerController",["$scope","$rootScope","toastr","CustomerService",function(e,t,r,o){e.showMessageForm=!1,e.contact={name:"",message:"",email:"",idElement:0,idCustomer:0,idCulture:moment.locale()};var n=function(r,n){e.contact.idElement=null!=n.idElement?n.idElement:null,e.contact.idCustomer=n.idCustomer,null!=t.authData&&1==t.authData.isAuthenticated?o.GetCustomer.query().$promise.then(function(t){e.contact.name=t.name,e.contact.email=t.email,e.showMessageForm=!0},function(e){t.error=e}):e.showMessageForm=!0};e.$on("customerLoaded",function(e,t){n(e,t)}),e.$on("elementLoaded",function(e,t){n(e,t)}),e.sendEmail=function(){o.SendEmailRequestInfo.execute(e.contact).$promise.then(function(e){r.success(e.message,"Confirmação!")},function(e){t.error=e})}}]).controller("AgentDetailCustomerController",["$timeout","$scope","$rootScope","CustomerService","ElementService","$stateParams","$controller","config",function(e,t,r,o,n,i,l,u){t.customer=null,t.properties=[],t.recordCount=0,t.filter={groupIn:3,recordCount:0,totalRecodsPerPage:12,orderBy:"createDate DESC",pageIndex:0,idCustomer:i.idCustomer,idCulture:moment.locale()};var a=function(){t.filter.IDPurpose=[],t.filter.FilterAttribute=[],null!=t.filter.singleIDPurpose&&t.filter.IDPurpose.push(t.filter.singleIDPurpose),null==t.filter.defaultvalues||t.filter.defaultvalues.minPrice==t.filter.minPrice&&t.filter.defaultvalues.maxPrice==t.filter.maxPrice||t.filter.FilterAttribute.push({IDAttribute:5,InitialValue:t.filter.minPrice,FinalValue:t.filter.maxPrice}),null==t.filter.defaultvalues||t.filter.defaultvalues.minRooms==t.filter.minRooms&&t.filter.defaultvalues.maxRooms==t.filter.maxRooms||t.filter.FilterAttribute.push({IDAttribute:1,InitialValue:t.filter.minRooms,FinalValue:t.filter.maxRooms}),null==t.filter.defaultvalues||t.filter.defaultvalues.minGarage==t.filter.minGarage&&t.filter.defaultvalues.maxGarage==t.filter.maxGarage||t.filter.FilterAttribute.push({IDAttribute:11,InitialValue:t.filter.minGarage,FinalValue:t.filter.maxGarage}),null==t.filter.defaultvalues||t.filter.defaultvalues.minArea==t.filter.minArea&&t.filter.defaultvalues.maxArea==t.filter.maxArea||t.filter.FilterAttribute.push({IDAttribute:4,InitialValue:t.filter.minArea,FinalValue:t.filter.maxArea}),n.ListElement.query(t.filter).$promise.then(function(r){e(function(){t.properties=r.records,t.recordCount=r.recordCount,t.filter.recordCount=r.recordCount},100)},function(e){r.error=e})};t.$on("filterRequested",function(e,t){a()}),a(),n.ListFeatured.query({idCustomer:i.idCustomer,idCulture:moment.locale()}).$promise.then(function(e){t.elementFeatured=e},function(e){r.error=e}),o.GetCustomer.query({idCustomer:i.idCustomer}).$promise.then(function(e){t.customer=e,t.$broadcast("customerLoaded",{idCustomer:e.idCustomer})},function(e){r.error=e})}]);
angular.module("CustomerApp").directive("bookmarkLoaded",function(){return function(o,e,a){if(o.$last&&(console.log("bookmarkLoaded called"),$(".property").hasClass("masonry"))){console.log("masonry found");var s=$(".grid");if(s.imagesLoaded(function(){s.masonry({gutter:15,itemSelector:".masonry"})}),$(window).width()>991){$(".masonry").hover(function(){$(".masonry").each(function(){$(".masonry").addClass("masonry-hide-other"),$(this).removeClass("masonry-show")}),$(this).addClass("masonry-show")},function(){$(".masonry").each(function(){$(".masonry").removeClass("masonry-hide-other")})});var n={after:"0s",enter:"bottom",move:"20px",over:".5s",easing:"ease-out",viewportFactor:.33,reset:!1,init:!0};window.scrollReveal=new scrollReveal(n)}}}}).directive("agentPropertiesLoaded",function(){return function(o,e,a){if(o.$last){console.log("agentPropertiesLoaded called");var s=2,n=$(".layout-expandable"),l=n.height();n.height($(".layout-expandable .row").height()*s-5),$(".show-all").on("click",function(){console.log("show-all clicked"),n.hasClass("layout-expanded")?(n.height($(".layout-expandable .row").height()*s-5),n.removeClass("layout-expanded"),$(".show-all").removeClass("layout-expanded")):(n.height(l),n.addClass("layout-expanded"),$(".show-all").addClass("layout-expanded"))})}}});
angular.module("CustomerApp").factory("CustomerService",["$resource","config","Upload",function(e,t,r){"use strict";return{GetCustomer:e(t.apiUrl+"/apicustomer/GetCustomerAsync",{},{query:{method:"GET",params:{}}}),SaveCustomer:e(t.apiUrl+"/apicustomer/SaveCustomer",{},{execute:{method:"POST",params:{}}}),ListProperties:e(t.apiUrl+"/apicustomer/ListProperties",{},{query:{method:"POST",params:{}}}),SendEmailRequestInfo:e(t.apiUrl+"/apicustomer/SendEmailRequestInfo",{},{execute:{method:"POST",params:{}}}),SendEmailContact:e(t.apiUrl+"/apicustomer/SendEmailContact",{},{execute:{method:"POST",params:{}}})}}]);
angular.module("ElementApp").controller("ElementController",["$timeout","$rootScope","$scope","$filter","$state","$window","ElementService","StructureService","toastr","$uibModal",function(e,t,r,i,n,l,o,u,a,s){var m=function(e){1==e?n.go("properties-listing-lines"):n.go("properties-map")};r.initialize=function(){r.purposes=[],t.filter=null,r.elementResultPaged=[],r.elementResult=[],r.elementFeatured=[],r.listTopViewed=[],r.showSearchEngine=!0,r.templates=[{name:"featured",url:"modules/element/views/featured.html"}],t.filter={},r.listPurpose()},r.changeFilterPurpose=function(e){t.filter.singleIDPurpose=e},r.doFilterListing=function(e){t.filter.ActiveView=e;try{var r=new google.maps.Geocoder;r.geocode({address:t.filter.BaseAddress},function(r,i){if(i==google.maps.GeocoderStatus.OK)if(r.length>0)if(r.length>1){console.log(r);var n=s.open({templateUrl:"select-address-template.html",controller:"AddressSelectController",size:20,resolve:{addresses:function(){return r}}});n.result.then(function(r){t.filter.LatitudeBase=r.address.geometry.location.lat(),t.filter.LongitudeBase=r.address.geometry.location.lng(),t.filter.BaseAddress=r.address.formatted_address,m(e)},function(){console.log("Modal dismissed at: "+new Date)})}else t.filter.LatitudeBase=r[0].geometry.location.lat(),t.filter.LongitudeBase=r[0].geometry.location.lng(),t.filter.BaseAddress=r[0].formatted_address,m(e);else a.warning("Endereço não foi encontrado!","Informação");else a.warning("Endereço não foi encontrado!","Informação")})}catch(i){a.error("API Google não carregada.","Informação")}},r.getTemplateUrl=function(e){for(var t=0;t<r.templates.length;t++)if(r.templates[t].name==e)return r.templates[t].url},r.switchSearchEngine=function(){r.showSearchEngine=!r.showSearchEngine},r.listFeatured=function(e){null==e&&(e=0),o.ListFeatured.query({idCustomer:e,idCulture:moment.locale()}).$promise.then(function(e){r.elementFeatured=e,setCarouselWidth()},function(e){t.error=e})},r.listTopViewed=function(e){null==e&&(e=0),o.ListTopViewed.query({idCustomer:e,idCulture:moment.locale()}).$promise.then(function(e){r.listTopViewed=e},function(e){t.error=e})},r.listPurpose=function(){u.ListPurpose.query({idCulture:moment.locale()}).$promise.then(function(e){r.purposes=e},function(e){r.error=e})}}]).controller("ElementFilterController",["$timeout","$rootScope","$scope","$filter","$state","$window","ElementService","StructureService",function(e,t,r,i,n,l,o,u){1==t.filter.ActiveView?(t.filter.groupIn=3,t.filter.totalRecodsPerPage=12):(t.filter.groupIn=1,t.filter.totalRecodsPerPage=30),t.filter.recordCount=0,t.filter.orderBy="createDate DESC",t.filter.pageIndex=0,t.filter.idCulture=moment.locale();var a=function(){t.filter.IDPurpose=[],t.filter.FilterAttribute=[],null!=t.filter.singleIDPurpose&&t.filter.IDPurpose.push(t.filter.singleIDPurpose),null==t.filter.defaultvalues||t.filter.defaultvalues.minPrice==t.filter.minPrice&&t.filter.defaultvalues.maxPrice==t.filter.maxPrice||t.filter.FilterAttribute.push({Acronym:"VALT",InitialValue:t.filter.minPrice,FinalValue:t.filter.maxPrice}),null==t.filter.defaultvalues||t.filter.defaultvalues.minRooms==t.filter.minRooms&&t.filter.defaultvalues.maxRooms==t.filter.maxRooms||t.filter.FilterAttribute.push({Acronym:"BEDS",InitialValue:t.filter.minRooms,FinalValue:t.filter.maxRooms}),null==t.filter.defaultvalues||t.filter.defaultvalues.minGarage==t.filter.minGarage&&t.filter.defaultvalues.maxGarage==t.filter.maxGarage||t.filter.FilterAttribute.push({Acronym:"GAR",InitialValue:t.filter.minGarage,FinalValue:t.filter.maxGarage}),null==t.filter.defaultvalues||t.filter.defaultvalues.minArea==t.filter.minArea&&t.filter.defaultvalues.maxArea==t.filter.maxArea||t.filter.FilterAttribute.push({Acronym:"TA",InitialValue:t.filter.minArea,FinalValue:t.filter.maxArea}),console.log(t.filter.FilterAttribute),o.ListElement.query(t.filter).$promise.then(function(i){e(function(){r.properties=i.records,r.recordCount=i.recordCount,t.filter.recordCount=i.recordCount},100)},function(e){t.error=e})};r.$on("filterRequested",function(e,t){a()}),a()}]).controller("ElementDetailController",["$rootScope","$scope","$stateParams","ElementService","CustomerService",function(e,t,r,i,n){t.state="empty",t.element=null,t.customer=null,t.elementFeatured=[],t.elementSimilar=[],null!=r.idElement&&i.GetElement.query({idCulture:moment.locale(),idElement:r.idElement}).$promise.then(function(r){t.element=r,t.$broadcast("elementLoaded",r),i.ListImages.execute({idCulture:moment.locale(),idElement:r.idElement,groupIn:0}).$promise.then(function(e){for(var r=[],i=0;i<e.images.length;i++)r.push({index:i,image:e.images[i]});t.element.images=r},function(t){e.error=t}),n.GetCustomer.query({idCustomer:r.idCustomer}).$promise.then(function(e){t.customer=e},function(t){e.error=t}),i.ListFeatured.query({idCulture:moment.locale(),idCustomer:r.idCustomer}).$promise.then(function(e){t.elementFeatured=e},function(t){e.error=t}),i.ListSimilar.query({idCulture:moment.locale(),idElement:r.idElement,idCustomer:r.idCustomer}).$promise.then(function(e){t.elementSimilar=e},function(t){e.error=t})},function(e){t.error=e})}]).controller("ElementSubmitController",["$state","$rootScope","$scope","$stateParams","$filter","ElementService","toastr","Upload","config","$timeout","$uibModal",function(e,t,r,i,n,l,o,u,a,s,m){var c=null!=i.idElement?i.idElement:null,f=function(e){if(r.element.files&&r.element.files.length){var t=!0;r.element.files;angular.forEach(r.element.files,function(i){i.upload=u.upload({url:a.apiUrl+"/apielement/UploadImages",data:{file:i,idElement:e,deleteDir:t}}),t=!1,i.upload.then(function(t){s(function(){i.result="OK",d(e)})},function(e){e.status>0&&(r.errorMsg=e.status+": "+e.data)},function(e){i.progress=Math.min(100,parseInt(100*e.loaded/e.total))})})}},d=function(e){l.ListImages.execute({idElement:e,groupIn:3}).$promise.then(function(e){r.element.agregatedImages=e.images},function(e){t.error=e})};r.initialize=function(){r.element={idCulture:moment.locale()},r.basicAttributes=[],r.infrastructureAttributes=[],""!=c&&l.GetElement.query({idCulture:moment.locale(),idElement:c,igoreAttributes:!0,validateCustomer:!0}).$promise.then(function(t){r.element=t,d(r.element.idElement),r.$broadcast("elementLoaded",t),e.go("submit")},function(r){t.error=r,e.go("sign-in")}),r.listBasicAttributes(),r.listInfrastructureAttributes()},r.insertUpdateElement=function(){var e=r.element;e.basicAttributes=n("filter")(r.infrastructureAttributes,{checked:!0}),angular.forEach(r.basicAttributes,function(t){angular.forEach(t,function(t){t.Checked=!0,e.basicAttributes.push(t)})}),l.InsertUpdateElement.save(e).$promise.then(function(e){r.element.idElement=e.idElement,r.element.idCustomer=e.idCustomer,f(e.idElement),o.success(e.message,"Confirmação!"),r.element.files=null},function(e){t.error=e})},r.listBasicAttributes=function(){l.ListBasicAttributes.query({idCulture:moment.locale(),idElement:c}).$promise.then(function(e){r.basicAttributes=e},function(e){t.error=e})},r.listInfrastructureAttributes=function(){l.ListInfrastructureAttributes.query({idCulture:moment.locale(),idElement:c}).$promise.then(function(e){r.infrastructureAttributes=e},function(e){t.error=e})},r.setDefaultImage=function(e,i){l.SetDefaultImage.execute({idElement:e,idElementAttribute:i}).$promise.then(function(e){r.element.defaultPicturePath=e.defaultPicturePath,o.success(e.message,"Confirmação!")},function(e){t.error=e})},r.deleteImage=function(e,t){var r;r=null==t?"delete-all-images-template.html":"delete-image-template.html";var i=m.open({templateUrl:r,controller:"DeleteImageElementController",size:20,resolve:{idElement:function(){return e},idElementAttribute:function(){return t}}});i.result.then(function(e){d(e.idElement),o.success(e.message,"Confirmação!")},function(){console.log("Modal dismissed at: "+new Date)})},r.initialize()}]).controller("DeleteImageElementController",["$scope","$rootScope","ElementService","idElement","idElementAttribute","$uibModalInstance",function(e,t,r,i,n,l){e.idElement=i,e.idElementAttribute=n,e.confirmDeleteImage=function(){r.DeleteElementImage.execute({idElement:e.idElement,idElementAttribute:e.idElementAttribute}).$promise.then(function(t){l.close({message:t.message,idElement:e.idElement,idElementAttribute:e.idElementAttribute})},function(e){t.error=e})},e.cancelDeleteImage=function(){l.dismiss("cancel")},e.confirmDeleteAllImages=function(){r.DeleteElementImage.execute({idElement:e.idElement}).$promise.then(function(t){l.close({message:t.message,idElement:e.idElement})},function(e){t.error=e})},e.cancelDeleteAllImagese=function(){l.dismiss("cancel")}}]).controller("AddressSelectController",["$scope","$rootScope","addresses","$uibModalInstance",function(e,t,r,i){e.addresses=r,e.cancel=function(){i.dismiss("cancel")},e.select=function(e){i.close({address:e})}}]);
angular.module("ElementApp").directive("featuredLoaded",function(){return function(e,t,r){e.$last&&console.log("featuredLoaded called")}}).directive("propertyGalleryLoaded",function(){return function(e,t,r){e.$last&&(console.log("propertyGalleryLoaded called"),initializeOwl(!1))}}).directive("zonerBookmark",["$timeout","$rootScope","ElementService",function(e,t,r){return{restrict:"E",replace:!0,scope:{elementData:"="},templateUrl:"./modules/element/partials/bookmark.html",link:function(e,o,a){e.$watch("elementData",function(){null!=e.elementData&&(e.elementData.AddedAsFavorite?o.addClass("bookmark-added"):o.removeClass("bookmark-added"))}),o.bind("click",function(){1==e.elementData.AddedAsFavorite?r.RemoveAsFavorite.execute({idElement:e.elementData.idElement}).$promise.then(function(t){e.elementData.AddedAsFavorite=!1,o.removeClass("bookmark-added")},function(e){t.error=e}):r.AddAsFavorite.execute({idElement:e.elementData.idElement}).$promise.then(function(t){e.elementData.AddedAsFavorite=!0,o.addClass("bookmark-added")},function(e){t.error=e})})}}}]).directive("smallProperty",["config",function(e){return{replace:!0,restrict:"E",scope:{array:"=",limit:"="},templateUrl:"./modules/element/partials/small-property.html",link:function(e,t,r){}}}]).directive("mediumProperty",["config",function(e){return{restrict:"E",scope:{element:"=",config:"="},templateUrl:"./modules/element/partials/medium-property.html",link:function(e,t,r){}}}]);
angular.module("ElementApp").factory("ElementService",["$resource","config",function(e,t){return{SetDefaultImage:e(t.apiUrl+"/apielement/SetDefaultImage",{},{execute:{method:"GET",params:{}}}),DeleteElementImage:e(t.apiUrl+"/apielement/DeleteElementImage",{},{execute:{method:"GET",params:{}}}),ListImages:e(t.apiUrl+"/apielement/ListImages",{},{execute:{method:"GET",params:{}}}),InsertUpdateElement:e(t.apiUrl+"/apielement/InsertUpdateElement",{},{save:{method:"POST",params:{}}}),ListElement:e(t.apiUrl+"/apielement/ListElement",{},{query:{method:"POST",params:{},isArray:!1}}),ListFeatured:e(t.apiUrl+"/apielement/listfeatured",{},{query:{method:"GET",params:{},isArray:!0}}),ListTopViewed:e(t.apiUrl+"/apielement/ListTopViewed",{},{query:{method:"GET",params:{},isArray:!0}}),ListSimilar:e(t.apiUrl+"/apielement/ListSimilar",{},{query:{method:"GET",params:{},isArray:!0}}),ListBasicAttributes:e(t.apiUrl+"/apielement/ListBasicAttributes",{},{query:{method:"GET",params:{},isArray:!0}}),ListInfrastructureAttributes:e(t.apiUrl+"/apielement/ListInfrastructureAttributes",{},{query:{method:"GET",params:{},isArray:!0}}),GetElement:e(t.apiUrl+"/apielement/getelement",{},{query:{method:"GET",params:{}}}),InactivateElement:e(t.apiUrl+"/apielement/InactivateElement",{},{execute:{method:"GET",params:{}}}),AddAsFavorite:e(t.apiUrl+"/apielement/AddAsFavorite",{},{execute:{method:"GET",params:{}}}),RemoveAsFavorite:e(t.apiUrl+"/apielement/RemoveAsFavorite",{},{execute:{method:"GET",params:{}}}),ListBookmarked:e(t.apiUrl+"/apielement/ListBookmarked",{},{query:{method:"GET",params:{},isArray:!0}})}}]);
angular.module("LocationApp").controller("LocationController",["$rootScope","$scope","$location","LocationService",function(t,i,o,n){i.$on("elementLoaded",function(t,o){i.listCountry(),i.listStateProvince(o.idCountry),i.listCity(o.idCountry,o.idStateProvince)}),i.initialize=function(){console.log("LocationController.initialize called"),i.countries=[],i.stateProvinces=[],i.cities=[]},i.listCountry=function(){i.stateProvinces=[],i.cities=[],n.ListCountry.query().$promise.then(function(t){i.countries=t},function(i){console.log(i),t.error=i})},i.listStateProvince=function(o){console.log("listStateProvince called"),i.stateProvinces=[],i.cities=[],null!=o&&n.ListStateProvince.query({idCountry:o}).$promise.then(function(t){i.stateProvinces=t},function(i){t.error=i})},i.listCity=function(o,e){console.log("listCity called"),i.cities=[],null!=o&&null!=e&&n.ListCity.query({idCountry:o,idStateProvince:e}).$promise.then(function(t){i.cities=t},function(i){t.error=i})}}]);
angular.module("LocationApp").factory("LocationService",["$resource","config",function(i,r){return{ListCountry:i(r.apiUrl+"/apilocation/listcountry",{},{query:{method:"GET",params:{},isArray:!0}}),ListStateProvince:i(r.apiUrl+"/apilocation/liststateprovince",{},{query:{method:"GET",params:{},isArray:!0}}),ListCity:i(r.apiUrl+"/apilocation/listCity",{},{query:{method:"GET",params:{},isArray:!0}})}}]);
angular.module("CultureApp").controller("CultureController",["$scope","CultureService",function(e,u){e.cultures=[],e.culture=null,e.error=null,e.templates=[{name:"create",url:"/app/modules/culture/views/create.html"},{name:"list",url:"/app/modules/culture/views/list.html"}],e.getTemplateUrl=function(u){for(var t=0;t<e.templates.length;t++)if(e.templates[t].name==u)return e.templates[t].url},e.basedate=new Date(2010,11,28,14,57),e["delete"]=function(){$id=e.culture.IDCulture,u["delete"]({id:$id}).$promise.then(function(){e.cultures!=[]&&(e.cultures.pop(e.culture),e.culture=null)},function(u){e.error=u})},e.save=function(){e.culture.$save().then(function(){e.cultures.push(e.culture)},function(u){e.error=u})},e.update=function(){$id=e.culture.IDCulture,u.update({id:$id},e.culture).$promise.then(function(){e.listCulture()},function(u){e.error=u})},e.listCulture=function(){u.query().$promise.then(function(u){e.cultures=u},function(u){e.error=u})},e.getCulture=function(t){u.get({},{Id:t}).$promise.then(function(u){e.culture=u},function(u){e.error=u})}}]);
angular.module("CultureApp").factory("CultureService",["$resource",function(e){return e("http://localhost:9090/api/culture/:Id",{Id:"@Id"},{save:{method:"POST"},update:{method:"PUT"},reviews:{method:"GET",params:{},isArray:!0}})}]);
angular.module("StructureApp").controller("StructureController",["$scope","$location","StructureService",function(e,t,r){e.$on("elementLoaded",function(t,r){console.log("StructureController ---> elementLoaded Handled"),e.listPurpose(),null!=r.idPurpose&&e.listCategory(r.idPurpose),null!=r.idHierarchyStructureParent&&e.listType(r.idHierarchyStructureParent)}),e.initialize=function(){e.purposes=[],e.categories=[],e.types=[]},e.listPurpose=function(){e.categories=[],e.types=[],r.ListPurpose.query({idCulture:moment.locale()}).$promise.then(function(t){e.purposes=t},function(t){e.error=t})},e.listCategory=function(t){e.categories=[],e.types=[],null!=t&&r.ListCategory.query({idPurpose:t,idCulture:moment.locale()}).$promise.then(function(t){e.categories=t},function(t){e.error=t})},e.listType=function(t){e.types=[],null!=t&&r.ListType.query({idCategory:t,idCulture:moment.locale()}).$promise.then(function(t){e.types=t},function(t){e.error=t})}}]);
angular.module("StructureApp").factory("StructureService",["$resource","config",function(r,t){return{ListPurpose:r(t.apiUrl+"/apistructure/listpurpose",{},{query:{method:"GET",params:{},isArray:!0}}),ListCategory:r(t.apiUrl+"/apistructure/listcategory",{},{query:{method:"GET",params:{},isArray:!0}}),ListType:r(t.apiUrl+"/apistructure/listtype",{},{query:{method:"GET",params:{},isArray:!0}})}}]);
!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["angular"],t):"object"==typeof module&&module.exports?module.exports=t(require("angular")):t(e.angular)}(this,function(e){"use strict";var t=e.module("zonerMapModule",[]).factory("ZonerMap",["$timeout","$rootScope","$state","$document","$window","$compile","$filter","config","ElementService",function(e,t,i,a,o,n,s,l,r){var d=function(e,t){this.scope=e,this.zonerMapElem=t,this.filter=this.scope.filterData,this.elementResult=this.scope.elementResultData,this.init()},p=[{featureType:"water",elementType:"all",stylers:[{hue:"#d7ebef"},{saturation:-5},{lightness:54},{visibility:"on"}]},{featureType:"landscape",elementType:"all",stylers:[{hue:"#eceae6"},{saturation:-49},{lightness:22},{visibility:"on"}]},{featureType:"poi.park",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-81},{lightness:34},{visibility:"on"}]},{featureType:"poi.medical",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-80},{lightness:-2},{visibility:"on"}]},{featureType:"poi.school",elementType:"all",stylers:[{hue:"#c8c6c3"},{saturation:-91},{lightness:-7},{visibility:"on"}]},{featureType:"landscape.natural",elementType:"all",stylers:[{hue:"#c8c6c3"},{saturation:-71},{lightness:-18},{visibility:"on"}]},{featureType:"road.highway",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-92},{lightness:60},{visibility:"on"}]},{featureType:"poi",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-81},{lightness:34},{visibility:"on"}]},{featureType:"road.arterial",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-92},{lightness:37},{visibility:"on"}]},{featureType:"transit",elementType:"geometry",stylers:[{hue:"#c8c6c3"},{saturation:4},{lightness:10},{visibility:"on"}]}],c=null;return d.prototype={init:function(){var e=this;$(".geo-location").on("click",function(){e.showLoading("#btnGeoLocation"),$("#btnGeoLocation").addClass("spin-loading"),navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.filter.LatitudeBase=t.coords.latitude,e.filter.LongitudeBase=t.coords.longitude,e.scope.$apply(),e.hideLoading("#btnGeoLocation"),e.renderInitialMap()}):(t.error="Geo Location is not supported",e.hideLoading("#btnGeoLocation"))}),e.renderInitialMap(),this.scope.$on("executeSearchEvent",function(){e.showLoading("#btnSearch")}),this.scope.$watch("elementResultData",function(t,i){e.updateMap(t,e.filter)})},showLoading:function(e){console.log("showLoading called"),$(e).addClass("spin-loading").attr("disabled","disabled"),$("#map").addClass("fade-map")},hideLoading:function(e){console.log("hideLoading called"),$(e).removeClass("spin-loading").removeAttr("disabled"),$("#map").removeClass("fade-map")},centerSearchBox:function(){console.log("centerSearchBox SELF Called");var e=$(".search-box-wrapper"),t=$(".navigation"),i=20;$("body").hasClass("navigation-fixed-top")?($("#map, #slider").css("margin-top",t.height()),e.css("z-index",98)):($(".leaflet-map-pane").css("top",-50),$(".homepage-slider").css("margin-top",-$(".navigation header").height())),$(window).width()>768&&($("#slider .slide .overlay").css("margin-bottom",t.height()),$("#map, #slider").each(function(){if($("body").hasClass("horizontal-search-float"))e.css("top",$(this).height()+t.height()-e.height()-i),$("#slider .slide .overlay").css("margin-bottom",t.height()+e.height()+i),$("body").hasClass("has-fullscreen-map");else{var a,o=$(this).height(),n=$(".search-box").height();a=$("body").hasClass("has-fullscreen-map")?o/2-n/2:o/2-n/2+$(".navigation").height(),$(".search-box-wrapper").css("top",a)}}))},setMapHeight:function(){console.log("setMapHeight() called");var e=$("body");e.hasClass("has-fullscreen-map")&&$("#map").height($(window).height()-$(".navigation").height()),$("#map").height($(window).height()-$(".navigation").height());var t,i=$("#map").height(),a=$(".search-box").height();t=i/2-a/2,$("body").hasClass("horizontal-search-float")||$(".search-box-wrapper").css("top",t),$(window).width()<768&&$("#map").height($(window).height()-$(".navigation").height())},renderInitialMap:function(){var e=this;c=new google.maps.Map(document.getElementById("map"),{zoom:14,scrollwheel:!1,center:new google.maps.LatLng(e.filter.LatitudeBase,e.filter.LongitudeBase),mapTypeId:google.maps.MapTypeId.ROADMAP,styles:p}),e.setMapHeight(),e.centerSearchBox(),e.hideLoading("#btnSearch")},updateMap:function(e,t){var i=this;if(null!=document.getElementById("map")&&null!=e){var a,o=null,n=[],s=e;c=new google.maps.Map(document.getElementById("map"),{zoom:14,scrollwheel:!1,center:new google.maps.LatLng(t.LatitudeBase,t.LongitudeBase),mapTypeId:google.maps.MapTypeId.ROADMAP,styles:p});var r=new MarkerWithLabel({icon:" ",title:"Ponto Base",position:new google.maps.LatLng(t.LatitudeBase,t.LongitudeBase),map:c});if(t.Radius>0){var d=0;t.Radius<=5?d=14:t.Radius<=10?d=13:t.Radius<=15?d=12:t.Radius<=20&&(d=11),c.setOptions({zoom:d}),o=new google.maps.Circle({map:c,fillColor:"blue",strokeWeight:1,strokeColor:"blue",radius:1e3*t.Radius}),r.setOptions({zIndex:0}),o.bindTo("center",r,"position"),google.maps.event.addListener(o,"click",function(){})}else c.setOptions({zoom:8});for(a=0;a<s.length;a++){var h=s[a][0],g=document.createElement("img");g.src=h.iconPath;var u=document.createElement("div"),m={content:u,disableAutoPan:!1,pixelOffset:new google.maps.Size((-100),0),zIndex:null,alignBottom:!0,boxClass:"infobox-wrapper",enableEventPropagation:!0,closeBoxMargin:"0px 0px -8px 0px",closeBoxURL:"assets/img/close-btn.png",infoBoxClearance:new google.maps.Size(1,1)},f=new MarkerWithLabel({title:h.name,position:new google.maps.LatLng(h.latitude,h.longitude),map:c,icon:"assets/img/marker.png",labelContent:g,labelAnchor:new google.maps.Point(50,0),labelClass:"marker-style"}),y=h.price;n.push(f),u.innerHTML='<div class="infobox-inner"><a href="#/property-detail?idElement='+h.idElement+'"  ui-sref="property-detail({ idElement: '+h.idElement+'})"><div class="infobox-image" style="position: relative"><img src="'+(h.defaultPicturePath.includes("http")?h.defaultPicturePath:l.adminSite+h.defaultPicturePath)+'"><div><span class="infobox-price">'+y+'</span></div></div></a><div class="infobox-description"><div class="infobox-title"><a href="#/property-detail?idElement='+h.idElement+'"  ui-sref="property-detail({ idElement: '+h.idElement+'})">'+h.name+'</a></div><div class="infobox-location">'+h.cityName+", "+h.stateProvinceName+", "+h.countryName+"</div></div></div>",n[a].infobox=new InfoBox(m),google.maps.event.addListener(f,"click",function(e,t){return function(){var e;for(e=0;e<n.length;e++)n[e].infobox.close();n[t].infobox.open(c,this)}}(f,a))}var v=[{url:"assets/img/cluster.png",height:37,width:37}],b=new MarkerClusterer(c,n,{styles:v,maxZoom:15});google.maps.event.addListener(b,"click",function(){null!=o&&o.setMap(null)}),google.maps.event.addListener(c,"idle",function(){for(var e=0;e<s.length;e++)c.getBounds().contains(n[e].getPosition())}),i.setMapHeight(),i.centerSearchBox(),i.hideLoading("#btnSearch")}}},d}]).directive("zonerMap",["ZonerMap",function(e){return{restrict:"E",scope:{filterData:"=",elementResultData:"="},templateUrl:function(e,t){return"./modules/zonerMap/partials/template.html"},link:function(t,i){return new e(t,i)}}}]);return t});
!function(e,o){"use strict";"function"==typeof define&&define.amd?define(["angular"],o):"object"==typeof module&&module.exports?module.exports=o(require("angular")):o(e.angular)}(this,function(e){"use strict";var o=e.module("zonerPaginationModule",[]).factory("ZonerPagination",["$rootScope","$document","$window","$compile","config",function(e,o,t,a,n){var r=function(e,o){this.scope=e,this.ZonerPaginationElem=o};return r.prototype={},r}]).directive("zonerPagination",["ZonerPagination",function(e){var o=["$scope","$filter",function(e,o){e.$watchCollection("sourceArray",function(o,t){e.doPagging()}),e.$watch("orderBy",function(e,o){}),e.changePageIndex=function(o){console.log("changePageIndex called"),o<-1?e.pageIndex=0:e.pageIndex=o,e.doPagging()},e.doPagging=function(){if(e.sourceArray!=[]){null==e.totalPagesToShow&&(e.totalPagesToShow=9),e.showBefore=!1,e.showAfter=!1,e.pages=[];var o=e.recordCount,t=e.totalPagesToShow,a=0;e.totalPages=parseInt(o/e.totalRecodsPerPage),o%e.totalRecodsPerPage>0&&e.totalPages++,e.totalPages>e.totalPagesToShow?(t=e.pageIndex+t,t>e.totalPages?(t=e.totalPages,a=e.pageIndex-1):a=e.pageIndex,a>0&&t>e.totalPagesToShow&&(e.showBefore=!0),a+e.totalPagesToShow>=e.totalPages||(e.showAfter=!0)):(a=0,t=e.totalPages);for(var n=a;n<t;n++)e.pages.push({index:n})}}}];return{restrict:"E",scope:{pageIndex:"=",totalPagesToShow:"=",recordCount:"=",totalRecodsPerPage:"=",pagedArray:"=",sourceArray:"=",orderBy:"="},controller:o,templateUrl:function(e,o){return"./modules/_components/zonerPagination/partials/template.html"},link:function(o,t){return new e(o,t)}}}]);return o});